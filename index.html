<!DOCTYPE html>
<html lang="bg">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>БЪЛГАРИЯ НОВИНИ | Актуални събития в реално време</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Montserrat:wght@400;700;900&display=swap');
        body { font-family: 'Montserrat', sans-serif; }
        .news-card:hover h3 { color: #dc2626; }
    </style>
</head>
<body class="bg-gray-50 text-gray-900">

    <div class="bg-black text-white py-2 text-xs">
        <div class="max-w-6xl mx-auto px-4 flex justify-between items-center">
            <span id="current-date"></span>
            <span class="uppercase tracking-widest font-bold text-red-500 underline">Ексклузивно</span>
        </div>
    </div>

    <header class="bg-white shadow-md sticky top-0 z-50">
        <div class="max-w-6xl mx-auto px-4 py-6 flex flex-col md:flex-row justify-between items-center">
            <div class="text-center md:text-left mb-4 md:mb-0">
                <h1 class="text-4xl font-black text-blue-900 leading-none">БЪЛГАРИЯ<span class="text-red-600">НОВИНИ</span></h1>
                <p class="text-gray-500 text-sm font-bold uppercase tracking-widest mt-1 text-xs">Вашият прозорец към деня</p>
            </div>
            <nav class="flex space-x-6 text-sm font-bold uppercase">
                <a href="#" class="hover:text-red-600 transition">Политика</a>
                <a href="#" class="hover:text-red-600 transition">Икономика</a>
                <a href="#" class="hover:text-red-600 transition">Спорт</a>
                <a href="#" class="hover:text-red-600 transition font-black text-red-600">LIVE</a>
            </nav>
        </div>
    </header>

    <main class="max-w-6xl mx-auto px-4 py-10">
        <div class="flex items-center space-x-4 mb-8">
            <h2 class="text-2xl font-black uppercase border-b-4 border-red-600 pb-1">Последни Новини</h2>
            <div class="flex-grow h-px bg-gray-200"></div>
        </div>

        <div id="news-container" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8">
            <div class="col-span-full flex flex-col items-center py-20">
                <div class="animate-spin rounded-full h-12 w-12 border-b-2 border-red-600 mb-4"></div>
                <p class="text-gray-500 font-bold uppercase tracking-widest">Зареждане на новини...</p>
            </div>
        </div>
    </main>

    <footer class="bg-gray-900 text-white pt-12 pb-6">
        <div class="max-w-6xl mx-auto px-4 grid grid-cols-1 md:grid-cols-3 gap-10 border-b border-gray-800 pb-10">
            <div>
                <h3 class="text-xl font-black mb-4 uppercase">За Нас</h3>
                <p class="text-gray-400 text-sm leading-relaxed">Ние сме независим източник на информация, предоставящ най-новите новини от България и света в реално време.</p>
            </div>
            <div>
                <h3 class="text-xl font-black mb-4 uppercase">Категории</h3>
                <ul class="text-gray-400 text-sm space-y-2">
                    <li><a href="#" class="hover:text-white transition">Бизнес и технологии</a></li>
                    <li><a href="#" class="hover:text-white transition">Култура и изкуство</a></li>
                    <li><a href="#" class="hover:text-white transition">Времето в България</a></li>
                </ul>
            </div>
            <div>
                <h3 class="text-xl font-black mb-4 uppercase">Бюлетин</h3>
                <div class="flex">
                    <input type="email" placeholder="Email адрес" class="bg-gray-800 border-none px-4 py-2 w-full text-sm">
                    <button class="bg-red-600 px-4 py-2 text-sm font-bold">ОК</button>
                </div>
            </div>
        </div>
        <div class="text-center mt-6 text-gray-500 text-xs uppercase tracking-widest">
            &copy; 2026 БЪЛГАРИЯ НОВИНИ. Всички права запазени.
        </div>
    </footer>

    <script>
        // Set tanggal hari ini dalam format Bulgaria
        const options = { weekday: 'long', year: 'numeric', month: 'long', day: 'numeric' };
        document.getElementById('current-date').innerText = new Date().toLocaleDateString('bg-BG', options);

        async function loadNews() {
            const container = document.getElementById('news-container');
            try {
                // Memanggil backend di /functions/api/news.js
                const response = await fetch('/api/news');
                const data = await response.json();

                if (data.articles && data.articles.length > 0) {
                    container.innerHTML = ''; // Hapus loading spinner
                    
                    data.articles.slice(0, 9).forEach(article => {
                        // Jika gambar tidak ada, gunakan placeholder berita
                        const imgUrl = article.urlToImage || 'https://images.unsplash.com/photo-1585829365234-781fcd04c838?q=80&w=500';
                        
                        const card = `
                            <article class="news-card bg-white rounded-lg overflow-hidden shadow-sm hover:shadow-2xl transition duration-300 flex flex-col h-full border border-gray-100">
                                <div class="relative overflow-hidden h-48">
                                    <img src="${imgUrl}" alt="news" class="w-full h-full object-cover transition transform hover:scale-110 duration-500">
                                    <div class="absolute top-0 right-0 bg-red-600 text-white text-[10px] font-bold px-2 py-1 uppercase m-2">НОВО</div>
                                </div>
                                <div class="p-5 flex-grow">
                                    <div class="text-[10px] font-bold text-red-600 uppercase mb-2">${article.source.name}</div>
                                    <h3 class="text-lg font-black leading-tight mb-3 transition">${article.title}</h3>
                                    <p class="text-gray-600 text-sm line-clamp-3 mb-4 leading-relaxed">
                                        ${article.description || 'Прочетете подробностите за това важно събитие директно в оригиналната статия.'}
                                    </p>
                                </div>
                                <div class="p-5 pt-0 mt-auto border-t border-gray-50 flex justify-between items-center text-[10px] font-bold text-gray-400">
                                    <span>${new Date(article.publishedAt).toLocaleDateString('bg-BG')}</span>
                                    <a href="${article.url}" target="_blank" class="text-blue-900 hover:text-red-600 uppercase tracking-tighter border-b-2 border-blue-900 hover:border-red-600 pb-0.5 transition">Още →</a>
                                </div>
                            </article>
                        `;
                        container.innerHTML += card;
                    });
                } else {
                    container.innerHTML = '<p class="col-span-full text-center py-10">Няма намерени новини в момента.</p>';
                }
            } catch (error) {
                container.innerHTML = '<p class="col-span-full text-center py-10 text-red-500 font-bold uppercase">Грешка при свързването с новинарския поток.</p>';
                console.error("News load error:", error);
            }
        }

        // Panggil fungsi saat website terbuka
        loadNews();
    </script>
</body>
</html>
